%define NCONTACTPOINTS 11
%define NGEAR 4

%rem below is no loger used
%define MAX_CONTACT_TRIALS 31
%define MAX_COLLECT_STEPS 400
%Dir contactTrial_ref {
ushort icontact[4]    =  {0}  : ; 
double pos[4][2]      = {{0}} : ;
double lastCollect[4] =  {0}  : ;
double nf[4][3]       = {{0}} : live view of the weight normalized force;
generic double time[4][MAX_COLLECT_STEPS] = {{0}} : ;
generic double nfCollect[4][3][MAX_COLLECT_STEPS] = {{{0}}}  : collected weight normalized force;
generic double mrz[MAX_COLLECT_STEPS] = {0} : main rotor force in z direction;
generic double vel[4][3][MAX_COLLECT_STEPS] = {{{0}}}  : collected velocity;
} contactTrial[31];

%Dir deckContactStatOld_ref {
  char init          = 1 : ;
  char enable        = 0 : turn the functionality on ;
  char collect       = 0 : actually allow the collection;
  char save          = 0 : save the stats to an m file; 
  uchar itrial       = 0 : index of the current trial;
  double collectDt   = 0.01 : ;
  dir contactTrial_ref trial[31] = contactTrial[31] : ;
} deckContactStatOld;

%Dir deckContactStat_ref {
 char enable        = 0 : turn the functionality on ;
 char collect       = 0 : actually allow the collection;
 double nav_p_b_e_L[3]    = {0}  : ;
 double nav_p_t_e_L[3]    = {0}  : ;
 double nav_v_b_e_L[3]    = {0}  : ;
 double nav_v_t_e_L[3]    = {0}  : ;
 double nav_p_b_land_T[3] = {0}  : ;
 double nav_w_b_e_B[3]    = {0}  : ;
 double nav_w_t_e_T[3]    = {0}  : ;
 double p_b_land_T[3]     = {0}  : ;
 double p_g_land_T[4][2]  = {{0}} : ;
 double v_g_c_B[4][3]     = {{0}} :relative velocity between the landing gear corners and their contact points written in aircraft body frame ;
 double nav_p_g_land_T[4][2]  = {{0}} : ;
 double nav_v_g_c_B[4][3]     = {{0}} : ;
} deckContactStat;

%Dir params_gear_ref {
  dir deckContactStatOld_ref  statsOld = deckContactStatOld  : no longer use;  
  dir deckContactStat_ref        stats = deckContactStat     : for collecting deck contact stats (uses with history);  
  double xw[11] = { 1, 1, -1, -1,
   0.0, 0.0, -1.7*3.0, 1.7*3.0, -1.7*3.48, 1.7*1.5, 0.0 }    :position of contact points (ft);
  double yw[11] = { 1.2, -1.2, 1.2, -1.2,
   -1.7*3.0, 1.7*3.0, 0.0, 0.0, 0.0, 0.0, 0.0 }      :position of contact points (ft);
  double zw[11] = { 25.0/12+.13, 25.0/12+.13, 25.0/12+.13, 25.0/12+.13,
   -1.7*0.8, -1.7*0.8, -1.7*0.8, -1.7*0.8, 1.7*0.42, -1.7*0.3, 0.0 } :position of contact points (ft);
  double kg[11] = { 300, 300, 300, 300,
    5*15.0, 5*15.0, 5*15.0, 5*15.0, 5*30.0, 5*45.0, 0.0 } :stiffness of contact points;
  double tc           =       0.02   :time constant for vertical force changes (sec);
  double Kx           =        50.0   :stiffness of gear points;
  double Ky           =        50.0   :stiffness of gear points;
  double Kdamp        =        0.075  :damping coefficient;
  double coeff        =        1.0    :coefficient of friction with terrain of gear;
  double frcoeff      =        0.2    :coefficient of friction with terrain of other points;
  double rollingFriction =     0.05   :rolling coefficient of friction;
  double txmax        =        0.15   :maximum lateral gear deflection (ft);
  double hmax         =        6.0    :altitude to begin gear checks (ft);
  double lpatch       =        0.1    :(ft) length of tire patch, could make this a model;

  double dcm_lp[3][3] = {{1,0,0},{0,1,0},{0,0,1}} : ;
  double dcm_bp[3][3] = {{1,0,0},{0,1,0},{0,0,1}} : ;

  double gearx        =0      :force from gear;
  double geary        =0      :force from gear;
  double gearz        =0      :force from gear;
  double gearl        =0      :moment from gear;
  double gearm        =0      :moment from gear;
  double gearn        =0      :moment from gear;

  int wheels          = 0     :flag to make the contact points wheels;
  int watertgt_flag   = 0     :enable gear interaction with water target;

  double deflection[11] = {0,0,0,0,0,0,0,0,0,0,0} : ;

} params_gear;
